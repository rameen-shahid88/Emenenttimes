<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Blog - The Emenent Times</title>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
  :root {
    --newsprint: #f6f1e5;
    --headline: #2c2c2c;
    --byline: #555;
    --column-rule: #ccc;
    --ink: #333;
    --accent: #8b0000;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    background-color: #d9cdb4;
    color: var(--ink);
    font-family: 'Merriweather', serif;
    line-height: 1.55;
    overflow-x: hidden;
    padding: 20px 0;
  }

  .newspaper-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    background-color: var(--newsprint);
    box-shadow: 0 0 25px rgba(0,0,0,0.2);
    position: relative;
    border: 1px solid #b5a88a;
  }
  
  /* Navbar */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background-color: var(--newsprint);
    border-bottom: 2px solid var(--ink);
    border-top: 1px solid var(--ink);
    position: sticky;
    top: 0;
    z-index: 1000;
    font-family: 'Playfair Display', serif;
  }
  header.scrolled { box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

  .logo {
    font-weight: bold;
    font-size: 1.2rem;
    color: var(--accent);
    letter-spacing: 1px;
    cursor: pointer;
    border: 1px solid var(--ink);
    padding: 5px 10px;
    box-shadow: 3px 3px 0px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    white-space: nowrap;
  }
  .logo:hover {
    transform: translate(2px,2px);
    box-shadow: 1px 1px 0px rgba(0,0,0,0.1);
  }

  nav {
    display: flex;
    gap: 20px;
  }
  nav a {
    text-decoration: none;
    color: var(--ink);
    position: relative;
    font-variant: small-caps;
    font-size: 1rem;
    transition: color 0.3s ease;
    padding: 5px 0;
  }
  nav a:hover { color: var(--accent); }
  nav a.active {
    color: var(--accent);
    font-weight: bold;
  }
  nav a::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -2px;
    width: 0;
    height: 1px;
    background-color: var(--accent);
    transition: width 0.3s ease;
  }
  nav a:hover::after, nav a.active::after { width: 100%; }

  /* Hamburger for mobile */
  .hamburger {
    display: none;
    font-size: 1.8rem;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--ink);
    padding: 5px;
    z-index: 1001;
  }

  /* Mobile menu styles */
  .mobile-menu-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
    z-index: 999;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .mobile-menu-container.active {
    display: block;
    opacity: 1;
  }

  .mobile-nav {
    position: fixed;
    top: 0;
    right: -100%;
    width: 70%;
    max-width: 300px;
    height: 100%;
    background-color: var(--newsprint);
    padding: 80px 20px 20px;
    transition: right 0.3s ease;
    display: flex;
    flex-direction: column;
    gap: 15px;
    z-index: 1000;
    box-shadow: -2px 0 10px rgba(0,0,0,0.2);
    overflow-y: auto;
  }

  .mobile-nav.active {
    right: 0;
  }

  .mobile-nav a {
    text-decoration: none;
    color: var(--ink);
    font-variant: small-caps;
    font-size: 1.2rem;
    padding: 12px 15px;
    border-bottom: 1px solid var(--column-rule);
    transition: all 0.3s ease;
  }

  .mobile-nav a:hover, .mobile-nav a.active {
    color: var(--accent);
    background-color: rgba(139,0,0,0.05);
  }

  .close-menu {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 1.8rem;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--ink);
    padding: 5px;
  }

  @media (max-width: 768px) {
    .newspaper-container {
      padding: 15px;
    }
    
    header {
      padding: 10px 15px;
    }
    
    .logo {
      font-size: 1rem;
      padding: 4px 8px;
    }
    
    nav {
      display: none;
    }
    
    .hamburger {
      display: block;
    }
  }

  /* Newspaper Header */
  .newspaper-header {
    text-align: center;
    border-bottom: 3px double var(--ink);
    padding-bottom: 15px;
    margin: 25px 0;
    position: relative;
  }
  .newspaper-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2.5rem, 8vw, 3.5rem);
    font-weight: 700;
    margin: 10px 0;
    color: var(--headline);
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 2px 2px 3px rgba(0,0,0,0.1);
    line-height: 1.1;
  }
  .newspaper-date {
    font-style: italic;
    color: var(--byline);
    margin-top: 5px;
    font-size: 1rem;
  }
  .newspaper-tagline {
    font-style: italic;
    margin-top: 5px;
    color: var(--byline);
    font-size: 1.1rem;
    letter-spacing: 1px;
  }
  .newspaper-volume {
    position: absolute;
    top: 10px;
    right: 10px;
    font-style: italic;
    color: var(--byline);
    font-size: 0.9rem;
  }

  @media (max-width: 768px) {
    .newspaper-header {
      margin: 15px 0;
      padding-bottom: 10px;
    }
    
    .newspaper-volume {
      position: static;
      margin-bottom: 5px;
    }
    
    .newspaper-tagline {
      font-size: 1rem;
    }
  }

  .paper-edge {
    height: 5px;
    background: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.1) 10%, rgba(0,0,0,0.1) 90%, transparent 100%);
    margin: 20px 0;
  }

  /* Buttons below title */
  .btn-group {
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
    margin: 20px 0 40px 0;
  }
  .btn {
    background-color: var(--newsprint);
    color: var(--ink);
    border:1px solid var(--ink);
    padding:12px 20px;
    font-family: 'Georgia', serif;
    font-size:1rem;
    cursor:pointer;
    text-transform:uppercase;
    letter-spacing:1px;
    box-shadow:3px 3px 0px rgba(0,0,0,0.1);
    position:relative;
    overflow:hidden;
    transition:all 0.3s ease;
    min-width: 160px;
    text-align: center;
  }
  .btn::before {
    content:"";
    position:absolute;
    top:0;
    left:-100%;
    width:100%;
    height:100%;
    background:linear-gradient(90deg,transparent,rgba(139,0,0,0.1),transparent);
    transition:all 0.4s ease;
  }
  .btn:hover::before { left:100%; }
  .btn:hover {
    background-color: rgba(139,0,0,0.05);
    transform: translate(2px,2px);
    box-shadow:1px 1px 0px rgba(0,0,0,0.1);
  }

  @media (max-width: 768px) {
    .btn-group {
      flex-direction: column;
      align-items: center;
      margin: 15px 0 30px 0;
    }
    
    .btn {
      width: 100%;
      max-width: 280px;
      padding: 14px 20px;
    }
  }

  /* Breaking News Banner */
  .breaking-news {
    background-color: var(--accent);
    color: white;
    padding: 15px;
    margin-bottom: 30px;
    text-align: center;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
  }

  .breaking-news span {
    background-color: white;
    color: var(--accent);
    padding: 5px 10px;
    border-radius: 3px;
    font-size: 0.9rem;
  }

  /* Featured News */
  .featured-news {
    margin-bottom: 50px;
    border: 1px solid var(--column-rule);
    padding: 30px;
    background-color: rgba(255,255,255,0.3);
    position: relative;
  }

  .featured-news::before {
    content: "TOP STORY";
    position: absolute;
    top: -12px;
    left: 20px;
    background-color: var(--accent);
    color: white;
    padding: 5px 15px;
    font-size: 0.8rem;
    font-weight: bold;
    letter-spacing: 1px;
  }

  .news-image {
    width: 100%;
    height: auto;
    max-height: 350px;
    object-fit: cover;
    margin-bottom: 20px;
    border: 1px solid var(--ink);
  }

  .news-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.8rem, 5vw, 2.2rem);
    font-weight: 700;
    color: var(--headline);
    margin-bottom: 15px;
    line-height: 1.2;
  }

  .news-meta {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
    font-size: 0.9rem;
    color: var(--byline);
    font-style: italic;
    flex-wrap: wrap;
  }

  .news-excerpt {
    font-size: 1.1rem;
    line-height: 1.7;
    margin-bottom: 20px;
  }

  .read-more {
    display: inline-block;
    background-color: var(--ink);
    color: var(--newsprint);
    padding: 10px 20px;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.9rem;
    font-weight: bold;
    transition: all 0.3s ease;
    border: 1px solid var(--ink);
  }

  .read-more:hover {
    background-color: var(--accent);
    border-color: var(--accent);
  }

  /* News Container */
  .news-container {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 40px;
    margin: 40px 0;
  }

  @media (max-width: 992px) {
    .news-container {
      grid-template-columns: 1fr;
      gap: 30px;
    }
  }

  /* News Grid */
  .news-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
  }

  @media (max-width: 768px) {
    .news-grid {
      grid-template-columns: 1fr;
      gap: 25px;
    }
  }

  .news-card {
    border: 1px solid var(--column-rule);
    padding: 25px;
    background-color: var(--newsprint);
    box-shadow: 3px 3px 0px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
  }

  .news-card:hover {
    transform: translateY(-5px);
    box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
  }

  .card-image {
    width: 100%;
    height: 180px;
    object-fit: cover;
    margin-bottom: 15px;
    border: 1px solid var(--ink);
  }

  .card-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.2rem, 4vw, 1.4rem);
    font-weight: 700;
    color: var(--headline);
    margin-bottom: 10px;
    line-height: 1.3;
  }

  .card-meta {
    font-size: 0.85rem;
    color: var(--byline);
    margin-bottom: 15px;
    font-style: italic;
  }

  .card-excerpt {
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 20px;
    flex-grow: 1;
  }

  .card-link {
    display: block;
    text-align: center;
    background-color: var(--newsprint);
    color: var(--ink);
    padding: 8px 15px;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.85rem;
    font-weight: bold;
    transition: all 0.3s ease;
    border: 1px solid var(--ink);
  }

  .card-link:hover {
    background-color: var(--accent);
    color: white;
    border-color: var(--accent);
  }

  /* Sidebar */
  .sidebar {
    border-left: 1px solid var(--column-rule);
    padding-left: 30px;
  }

  @media (max-width: 992px) {
    .sidebar {
      border-left: none;
      border-top: 1px solid var(--column-rule);
      padding-left: 0;
      padding-top: 30px;
    }
  }

  .sidebar-widget {
    margin-bottom: 40px;
  }

  .widget-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--headline);
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--accent);
  }

  /* Events List */
  .events-list {
    list-style: none;
    padding: 0;
  }

  .events-list li {
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 1px dotted var(--column-rule);
  }

  .event-date {
    display: block;
    background-color: var(--accent);
    color: white;
    padding: 8px 12px;
    font-size: 0.9rem;
    font-weight: bold;
    margin-bottom: 10px;
    width: fit-content;
  }

  .events-list a {
    color: var(--ink);
    text-decoration: none;
    font-weight: 700;
    display: block;
    margin-bottom: 5px;
    transition: all 0.3s ease;
  }

  .events-list a:hover {
    color: var(--accent);
  }

  .event-location {
    font-size: 0.85rem;
    color: var(--byline);
    font-style: italic;
  }

  /* Announcements */
  .announcements-list {
    list-style: none;
    padding: 0;
  }

  .announcements-list li {
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px dotted var(--column-rule);
    position: relative;
    padding-left: 20px;
  }

  .announcements-list li::before {
    content: "•";
    color: var(--accent);
    font-weight: bold;
    position: absolute;
    left: 0;
  }

  .announcements-list a {
    color: var(--ink);
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .announcements-list a:hover {
    color: var(--accent);
  }

  .announcement-date {
    font-size: 0.85rem;
    color: var(--byline);
    font-style: italic;
  }

  /* University Links */
  .links-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }

  @media (max-width: 480px) {
    .links-grid {
      grid-template-columns: 1fr;
    }
  }

  .uni-link {
    display: block;
    background-color: var(--newsprint);
    color: var(--ink);
    padding: 10px;
    text-decoration: none;
    text-align: center;
    border: 1px solid var(--ink);
    font-size: 0.9rem;
    transition: all 0.3s ease;
  }

  .uni-link:hover {
    background-color: var(--accent);
    color: white;
    border-color: var(--accent);
  }

  /* Pagination */
  .pagination {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 60px 0 20px 0;
    clear: both;
    width: 100%;
    flex-wrap: wrap;
  }

  .page-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background-color: var(--newsprint);
    color: var(--ink);
    text-decoration: none;
    border: 1px solid var(--ink);
    font-weight: 700;
    transition: all 0.3s ease;
  }

  .page-link:hover, .page-link.active {
    background-color: var(--accent);
    color: white;
    border-color: var(--accent);
  }

  /* Newsletter Subscription */
  .newsletter {
    background-color: rgba(139,0,0,0.05);
    border: 2px solid var(--accent);
    padding: 25px;
    margin: 40px 0;
    text-align: center;
  }

  .newsletter h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem;
    color: var(--accent);
    margin-bottom: 15px;
  }

  .newsletter p {
    margin-bottom: 20px;
    font-style: italic;
  }

  .newsletter-form {
    display: flex;
    gap: 10px;
    max-width: 500px;
    margin: 0 auto;
  }

  @media (max-width: 600px) {
    .newsletter-form {
      flex-direction: column;
    }
  }

  .newsletter-input {
    flex: 1;
    padding: 12px 15px;
    border: 1px solid var(--ink);
    font-family: 'Merriweather', serif;
    font-size: 1rem;
  }

  .newsletter-btn {
    background-color: var(--ink);
    color: var(--newsprint);
    border: 1px solid var(--ink);
    padding: 12px 20px;
    font-family: 'Georgia', serif;
    font-size: 1rem;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
    white-space: nowrap;
  }

  .newsletter-btn:hover {
    background-color: var(--accent);
    border-color: var(--accent);
  }

  footer {
    margin-top: 80px;
    padding: 20px;
    text-align: center;
    font-size: 0.9rem;
    color: var(--byline);
    border-top: 2px solid var(--ink);
    font-style: italic;
  }
  
  @media (max-width: 768px) {
    footer {
      margin-top: 60px;
      padding: 15px;
    }
  }
  
  /* Popup Styles */
  .news-popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.85);
    z-index: 2000;
    overflow-y: auto;
    padding: 40px 20px;
  }

  .popup-content {
    position: relative;
    max-width: 900px;
    margin: 0 auto;
    background-color: var(--newsprint);
    padding: 40px;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
    border: 1px solid #b5a88a;
  }

  .close-popup {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 2rem;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--ink);
    padding: 5px;
    z-index: 2001;
    transition: color 0.3s ease;
  }

  .close-popup:hover {
    color: var(--accent);
  }

  .popup-header {
    border-bottom: 3px double var(--ink);
    padding-bottom: 20px;
    margin-bottom: 25px;
    position: relative;
  }

  .popup-title {
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--headline);
    margin: 0 0 15px 0;
    line-height: 1.2;
  }

  .popup-meta {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
    font-size: 0.95rem;
    color: var(--byline);
    font-style: italic;
    flex-wrap: wrap;
  }

  .popup-image {
    width: 100%;
    height: auto;
    max-height: 450px;
    object-fit: cover;
    margin-bottom: 25px;
    border: 1px solid var(--ink);
  }

  .popup-body {
    font-size: 1.1rem;
    line-height: 1.8;
    margin-bottom: 30px;
  }

  .popup-body p {
    margin-bottom: 20px;
  }

  .popup-footer {
    border-top: 1px solid var(--column-rule);
    padding-top: 20px;
    font-style: italic;
    color: var(--byline);
    font-size: 0.9rem;
  }

  @media (max-width: 768px) {
    .popup-content {
      padding: 30px 20px;
    }
    
    .popup-title {
      font-size: 1.8rem;
    }
    
    .popup-body {
      font-size: 1rem;
    }
  }
</style>
</head>
<body>

<div class="newspaper-container">

  <!-- Navbar -->
  <header id="navbar">
    <div class="logo" onclick="location.href='index.html'">The Emenent Times</div>
    <button class="hamburger" onclick="openMobileMenu()">☰</button>
    <nav id="menu">
      <a href="index.html">home</a>
      <a href="resources.html">resources</a>
      <a href="blog.html" class="active">blog</a>
      <a href="contactus.html">contact</a>
    </nav>
    
    <!-- Mobile menu overlay -->
    <div class="mobile-menu-container" id="mobile-menu-container" onclick="closeMobileMenu()"></div>
    
    <!-- Mobile menu -->
    <div class="mobile-nav" id="mobile-nav">
      <button class="close-menu" onclick="closeMobileMenu()">×</button>
      <a href="index.html">home</a>
      <a href="resources.html">resources</a>
      <a href="blog.html" class="active">blog</a>
      <a href="contactus.html">contact</a>
    </div>
  </header>

  <!-- Newspaper header -->
  <div class="newspaper-header">
    <div class="newspaper-volume">VOL. MMXXV No. 3</div>
    <div class="newspaper-date" id="current-date">Monday, January 1, 2025</div>
    <h1 class="newspaper-title">Emenent Times</h1>
    <div class="newspaper-tagline">- basically keeping up with the emenents</div>
  </div>

  <!-- Buttons right after title -->
  <div class="btn-group">
    <button class="btn" onclick="location.href='index.html'">Return Home</button>
    <button class="btn" onclick="location.href='resources.html'">Access Resources</button>
    <button class="btn" onclick="location.href='contactus.html'">Contact Us</button>
  </div>

  <div class="paper-edge"></div>

  <!-- Featured News -->
  <div class="featured-news" id="featured-news">
    <!-- Content will be loaded from JSON -->
  </div>

  <div class="paper-edge"></div>

  <!-- News Content -->
  <div class="news-container">
    <div class="news-main">
      <!-- News Grid -->
      <div class="news-grid" id="news-grid">
        <!-- Content will be loaded from JSON -->
      </div>

      <!-- Pagination -->
      <div class="pagination">
        <a href="#" class="page-link">&laquo;</a>
        <a href="#" class="page-link active">1</a>
        <a href="#" class="page-link">2</a>
        <a href="#" class="page-link">3</a>
        <a href="#" class="page-link">&raquo;</a>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Upcoming Events Widget -->
      <div class="sidebar-widget">
        <h3 class="widget-title">Important Dates</h3>
        <ul class="events-list">
          <li>
            <span class="event-date">SEPT 01</span>
            <a href="#">Start Of Orientation Week for DE-47</a>
            <span class="event-location">NUST, College of Electrical and Mechanical Engineering</span>
          </li>
          <li>
            <span class="event-date">SEPT 08</span>
            <a href="#">Commencement of Classes for Fall'2025</a>
            <span class="event-location">NUST, College of Electrical and Mechanical Engineering</span>
          </li>
          
      </div>

      <!-- Announcements Widget -->
      <div class="sidebar-widget">
        <h3 class="widget-title">Announcements</h3>
        <ul class="announcements-list">
          <li>
            <a href="#">The Emenent Times is online now</a>
            <div class="announcement-date">Posted August 23, 2025</div>
          </li>
         
        </ul>
      </div>
    </div>
  </div>

  <footer>
    &copy; 2025 The Emenent Times | Published by Emenents for Emenents | 
    <a href="contactus.html" style="color: var(--accent); text-decoration: none;">Contact Us</a>
  </footer>
</div>

<!-- Popup for full articles -->
<div class="news-popup" id="news-popup">
  <div class="popup-content" id="popup-content">
    <button class="close-popup" onclick="closePopup()">×</button>
    <div class="popup-header">
      <h2 class="popup-title" id="popup-title"></h2>
      <div class="popup-meta" id="popup-meta"></div>
    </div>
    <img src="" alt="" class="popup-image" id="popup-image">
    <div class="popup-body" id="popup-body"></div>
    <div class="popup-footer">
      <p>Published in The Emenent Times</p>
    </div>
  </div>
</div>

<script>
// Set current date
const now = new Date();
const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);

// Navbar shadow on scroll
window.addEventListener('scroll', () => {
  const navbar = document.getElementById('navbar');
  if (window.scrollY > 10) navbar.classList.add('scrolled');
  else navbar.classList.remove('scrolled');
});

// Mobile menu functions
function openMobileMenu() {
  document.getElementById("mobile-nav").classList.add("active");
  document.getElementById("mobile-menu-container").classList.add("active");
  document.body.style.overflow = 'hidden';
}

function closeMobileMenu() {
  document.getElementById("mobile-nav").classList.remove("active");
  document.getElementById("mobile-menu-container").classList.remove("active");
  document.body.style.overflow = 'auto';
}

// Close menu when clicking outside
document.getElementById('mobile-menu-container').addEventListener('click', closeMobileMenu);

// Prevent closing when clicking on the menu itself
document.getElementById('mobile-nav').addEventListener('click', function(e) {
  e.stopPropagation();
});

// Store all articles globally
let allArticlesData = [];

// Pagination functionality
let currentPage = 1;
const articlesPerPage = 6; // Number of articles to show per page

// Load articles from JSON with pagination
function loadArticles(page = 1) {
  fetch('articles.json')
    .then(response => response.json())
    .then(data => {
      // Store all articles globally for popup access
      allArticlesData = data.articles;
      
      // Load featured article
      const featuredArticle = data.articles.find(article => article.featured);
      if (featuredArticle) {
        document.getElementById('featured-news').innerHTML = `
          <img src="${featuredArticle.image}" alt="${featuredArticle.title}" class="news-image">
          <h2 class="news-title">${featuredArticle.title}</h2>
          <div class="news-meta">${featuredArticle.meta}</div>
          <p class="news-excerpt">${featuredArticle.excerpt}</p>
          <a href="#" class="read-more" onclick="openPopup('${featuredArticle.id}'); return false;">Read Full Story</a>
        `;
      }

      // Get non-featured articles for pagination
      const nonFeaturedArticles = data.articles.filter(article => !article.featured);
      
      // Calculate pagination values
      const totalPages = Math.ceil(nonFeaturedArticles.length / articlesPerPage);
      const startIndex = (page - 1) * articlesPerPage;
      const endIndex = Math.min(startIndex + articlesPerPage, nonFeaturedArticles.length);
      const pageArticles = nonFeaturedArticles.slice(startIndex, endIndex);
      
      // Update current page
      currentPage = page;
      
      // Load articles for current page
      const newsGrid = document.getElementById('news-grid');
      newsGrid.innerHTML = '';
      
      pageArticles.forEach(article => {
        const articleCard = document.createElement('div');
        articleCard.className = 'news-card';
        articleCard.innerHTML = `
          <img src="${article.image}" alt="${article.title}" class="card-image">
          <h3 class="card-title">${article.title}</h3>
          <div class="card-meta">${article.meta}</div>
          <p class="card-excerpt">${article.excerpt}</p>
          <a href="#" class="read-more" onclick="openPopup('${article.id}'); return false;">Read More</a>
        `;
        newsGrid.appendChild(articleCard);
      });
      
      // Update pagination controls
      updatePaginationControls(currentPage, totalPages);
    })
    .catch(error => {
      console.error('Error loading articles:', error);
      // Fallback content if JSON fails to load
      document.getElementById('featured-news').innerHTML = `
        <p>Error loading articles. Please check if articles.json exists.</p>
      `;
      document.getElementById('news-grid').innerHTML = `
        <p>Articles could not be loaded at this time.</p>
      `;
    });
}

// Update pagination controls
function updatePaginationControls(currentPage, totalPages) {
  const paginationContainer = document.querySelector('.pagination');
  paginationContainer.innerHTML = '';
  
  // Previous button
  const prevButton = document.createElement('a');
  prevButton.href = '#';
  prevButton.className = 'page-link';
  prevButton.innerHTML = '&laquo;';
  prevButton.addEventListener('click', (e) => {
    e.preventDefault();
    if (currentPage > 1) {
      loadArticles(currentPage - 1);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  });
  if (currentPage === 1) {
    prevButton.style.opacity = '0.5';
    prevButton.style.pointerEvents = 'none';
  }
  paginationContainer.appendChild(prevButton);
  
  // Page number buttons
  const maxVisiblePages = 5; // Maximum number of page buttons to show
  let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
  let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
  
  // Adjust if we're at the end
  if (endPage - startPage + 1 < maxVisiblePages) {
    startPage = Math.max(1, endPage - maxVisiblePages + 1);
  }
  
  for (let i = startPage; i <= endPage; i++) {
    const pageLink = document.createElement('a');
    pageLink.href = '#';
    pageLink.className = 'page-link';
    if (i === currentPage) {
      pageLink.classList.add('active');
    }
    pageLink.textContent = i;
    pageLink.addEventListener('click', (e) => {
      e.preventDefault();
      loadArticles(i);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    paginationContainer.appendChild(pageLink);
  }
  
  // Next button
  const nextButton = document.createElement('a');
  nextButton.href = '#';
  nextButton.className = 'page-link';
  nextButton.innerHTML = '&raquo;';
  nextButton.addEventListener('click', (e) => {
    e.preventDefault();
    if (currentPage < totalPages) {
      loadArticles(currentPage + 1);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  });
  if (currentPage === totalPages) {
    nextButton.style.opacity = '0.5';
    nextButton.style.pointerEvents = 'none';
  }
  paginationContainer.appendChild(nextButton);
}

// Handle ESC key press
function handleEscKey(event) {
  if (event.key === 'Escape' || event.keyCode === 27) {
    closePopup();
  }
}

// Popup functions
function openPopup(articleId) {
  // Find the article in our globally stored data
  const article = allArticlesData.find(a => a.id === articleId);
  if (article) {
    document.getElementById('popup-title').textContent = article.title;
    document.getElementById('popup-meta').innerHTML = article.meta;
    document.getElementById('popup-image').src = article.image;
    document.getElementById('popup-image').alt = article.title;
    document.getElementById('popup-body').innerHTML = article.body;
    document.getElementById('news-popup').style.display = 'block';
    document.body.style.overflow = 'hidden';
    
    // Add event listener for ESC key when popup is open
    document.addEventListener('keydown', handleEscKey);
  }
}

function closePopup() {
  document.getElementById('news-popup').style.display = 'none';
  document.body.style.overflow = 'auto';
  
  // Remove the ESC key event listener when popup is closed
  document.removeEventListener('keydown', handleEscKey);
}

// Close popup when clicking outside the content
document.getElementById('news-popup').addEventListener('click', function(event) {
  if (event.target === this) {
    closePopup();
  }
});

// Load articles when page is ready
document.addEventListener('DOMContentLoaded', () => {
  loadArticles(1); // Load first page initially
});
</script>
</body>
</html>